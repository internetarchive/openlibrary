$def with (batch_result=None)
$# type: (BatchResult)
$var title: $_("Batch Imports")

<div id="contentHead">
  <h1>$_("Batch Imports")</h1>
</div>
<div id="contentBody" class="batchImport">
  <p>$_('Attach a JSONL formatted document with import records or paste JSONL data below.')</p>
  <p>$:_('See the <a href="https://github.com/internetarchive/openlibrary-client/tree/master/olclient/schemata">olclient import schemata</a> for more.')</p>

  <form method="POST" enctype="multipart/form-data" action="/import/batch/new">
    <label for="batchImport">Upload JSONL File:</label>
    <input type="file" name="batchImport" id="batchImport">

    <label for="jsonlData">Or Paste Raw JSONL Data:</label>
    <textarea name="jsonlData" id="jsonlData" rows="10" cols="50" placeholder="Paste raw JSONL data here"></textarea>

    <button type="submit">Import</button>
  </form>




  $if batch_result and batch_result.errors:
    <p>$_('Import failed.')</p>
    <p>$_('No import will be queued until *every* record validates successfully.')</p>
    <p>$_('Please update the JSONL file or the pasted data and reload this page (there should be no need to reattach the file).')</p>
    <p>$_('Validation errors:')</p>
    <ul>
      $for error in batch_result.errors:
        <li><strong>$_('Line %d:', error.line_number)</strong> $error.error_message</li>
    </ul>

  $if batch_result and batch_result.batch:
    <p>$_('Import results for batch:') Batch #$batch_result.batch.id ($batch_result.batch.name)</p>
    <p>$_('Records submitted:') $batch_result.batch.total_submitted</p>
    <p>$_('Total queued:') $batch_result.batch.total_queued</p>
    <p>$_('Total skipped:') $batch_result.batch.total_skipped</p>
    $if batch_result.batch.total_skipped > 0:
      <details>
        <summary>$_('Not queued because they are already present in the queue:')</summary>
        <ol>
          $for item in batch_result.batch.items_skipped:
            <li>$item</li>
        </ol>
      </details>
</div>
