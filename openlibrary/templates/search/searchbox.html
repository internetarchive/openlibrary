$def with (q, placeholder="", category=None)

$ placeholder = placeholder or _('Search')

<div class="searchbox">
    <input
        type="text"
        class="searchbox__input"
        name="q"
        size="100"
        placeholder="$placeholder"
        aria-label="$_('Search')"
        value="$q"
    >
    <div>
        <input type="submit" value="" class="searchbox__btn-icon" aria-label="$_('Search')">
    </div>
</div>

<script>
(function(){
  var category = '$category';
  var input = document.querySelector('.searchbox__input');
  var form = document.querySelector('.searchbox').closest('form') || (input && input.form);
  if (!input) return;

  function updateValidation() {
    var shouldRestrict = category === 'authors';
    if (shouldRestrict) {
      input.setAttribute('minlength', '2');
      input.setAttribute('pattern', '.{2,}');
      input.setAttribute('oninvalid', 'this.setCustomValidity(this.value.trim().length > 0 && this.value.trim().length < 2 ? "Please enter at least 2 characters" : "")');
      input.setAttribute('oninput', 'this.setCustomValidity("")');
    } else {
      input.removeAttribute('minlength');
      input.removeAttribute('pattern');
      input.removeAttribute('oninvalid');
      input.removeAttribute('oninput');
    }
  }

  updateValidation();

  if (form) {
    form.addEventListener('submit', function(e){
      if (category === 'authors' && !input.checkValidity()) {
        e.preventDefault();
        if (typeof input.reportValidity === 'function') {
          input.reportValidity();
        } else {
          input.focus();
        }
      }
    }, false);
  }
})();
</script>
