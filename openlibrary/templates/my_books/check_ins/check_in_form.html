$def with()

$code:
  year = current_year()
  months = [
    _('January'),
    _('February'),
    _('March'),
    _('April'),
    _('May'),
    _('June'),
    _('July'),
    _('August'),
    _('September'),
    _('October'),
    _('November'),
    _('December'),
  ]

<div class="check-in">
  <form class="check-in__form" action="" method="post">
    <input type="hidden" name="event_type" value="3">
    <input type="hidden" name="event_id" value="">
    <input type="hidden" name="edition_key" value="">
    <div>
      $_('Add an optional check-in date. Check-in dates are used to track yearly reading goals.')
    </div>
    <div class="check-in__inputs">
      <label class="check-in__label">$_('End Date:')</label>
      <span>
        <label class="check-in__year-label">$_('Year:')</label>
        <select class="check-in__select" name="year">
          <option value="">$_('Year')</option>
          <option class="hidden show-if-local-year" value="$(year + 1)">$(year + 1)</option>
          $for i in range(120):
            <option value="$(year - i)">$(year - i)</option>
        </select>
      </span>
      <span>
        <label class="check-in__month-label">$_('Month:')</label>
        <select class="check-in__select" name="month" disabled>
          <option value="">$_('Month')</option>
          $for idx, month in enumerate(months):
            <option value="$(idx + 1)">$month</option>
        </select>
      </span>
      <span>
        <label class="check-in__day-label">$_('Day:')</label>
        <select class="check-in__select" name="day" disabled>
          <option value="">$_('Day')</option>
          $for i in range(31):
            <option value="$(i + 1)">$(i + 1)</option>
        </select>
      </span>
      <span>
        <a class="check-in__today" href="javascript:;" data-ol-link-track="CheckInForm|SetDateToday">$_("Today")</a>
      </span>
    </div>
    <span class="check-in__actions">
      <button class="check-in__delete-btn cta-btn cta-btn--delete invisible" data-ol-link-track="CheckInForm|DeleteCheckIn">$_('Delete Event')</button>
      <button type="submit" class="check-in__submit-btn cta-btn cta-btn--shell" data-ol-link-track="CheckInForm|SubmitCheckIn" disabled>$_('Submit')</button>
    </span>
  </form>
</div>
