$def with (thing, name)

$if thing.is_primitive:
    <input type="text" id="input_$name" name="$name" value="$thing.value" width="100%">
$else:
    $:macros.ThingReference(thing.type, name, thing.key)